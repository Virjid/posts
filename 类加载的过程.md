---
title: 类加载的过程
date: 2019-07-17 15:03:21
tags: Java
---

## 类加载的过程

一个类的全部生命周期可以用7个阶段表示：

1. 加载

2. 验证

3. 准备

4. 解析

5. 使用

6. 卸载

![](./类加载的过程/class1.png)

其中，验证、准备、解析统称为连接。



下面主要讲一下类加载过程，需要注意一下，这里所谓的类加载过程是由上图中的 **加载、连接、初始化** 这三部分所组成。

## 加载

在加载阶段，JVM的任务主要有以下三个：

- 通过类的全限定名去获取定义此类的二进制字节流
- 将字节流所代表的静态存储结构转化为方法区的运行时数据结构
- 在内存中生成一个代表该类的`java.lang.Class对象`，该对象是访问类在方法区各种数据的入口



需要补充一下的是：

- Class对象并非一定在堆中，对于HotSpot虚拟机就将其存储在方法区中
- 所谓的二进制字节流并没有要求其来源，这意味着它除了可以来自Class文件以外，还可以是网络传输、由其他文件生成、压缩包（JAR、WAR等）、数据库甚至是动态生成

## 连接

### 验证

### 准备

### 解析



## 初始化



## 何时进行初始化？



## 类的被动引用



